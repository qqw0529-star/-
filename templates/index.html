<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>é•·ç…§ç©åˆ†å¯©æŸ¥å°å¹«æ‰‹</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body id="page-top">
  <header>
    <img src="/static/logo.svg" alt="logo" height="60">
    <h1>ğŸ”° å°å¡ç©åˆ†å¯©æŸ¥ç³»çµ± <small>Care Points Helper</small></h1>
  </header>

  <nav class="sub-nav">
    <a href="#calculator-section" class="active">ç©åˆ†è©¦ç®—</a>
    <a href="#qa-section">å¸¸è¦‹å•ç­” (Q&A)</a>
    <a href="#links-section">ç›¸é—œé€£çµ</a>
  </nav>

  <div class="disclaimer-notice">
      <p>æ³¨æ„ï¼šæœ¬å·¥å…·åƒ…ä¾›è©¦ç®—åƒè€ƒï¼Œæœ€çµ‚å¯©æ ¸çµæœè«‹ä»¥ä¸»ç®¡æ©Ÿé—œèªå®šç‚ºæº–ã€‚</p>
      <p>
          <a href="https://line.me/R/ti/p/@458tgyzb" target="_blank" rel="noopener noreferrer" class="report-link">!!ç³»çµ±éŒ¯èª¤å›å ±!! (é»æ­¤åŠ å…¥LINEå¥½å‹å›å ±)</a>
      </p>
  </div>


  <main>
    <div id="calculator-section">
        <section id="input-section">
          <h2>è¼¸å…¥ç©åˆ†è³‡æ–™</h2>
          <div class="input-group"> <label for="start_minguo">å°å¡ç”Ÿæ•ˆæ—¥æœŸï¼ˆæ°‘åœ‹ YYY-MM-DDï¼‰ï¼š</label> <input type="text" id="start_minguo" placeholder="ä¾‹å¦‚ï¼š112-06-02"> <button onclick="calculateDates()">è¨ˆç®—æ•ˆæœŸ</button> <div id="date-display" class="date-info-placeholder"> </div> </div>
          <fieldset> <legend>ä¸»è¦ç©åˆ†</legend> <div class="input-item"> <label for="prof_course">â–¶ å°ˆæ¥­èª²ç¨‹ç©åˆ†ï¼š</label> <input type="number" id="prof_course" value="0" min="0"> </div> <div class="input-item"> <label for="qer_quality">â–¶ å°ˆæ¥­å“è³ªç©åˆ†ï¼š</label> <input type="number" id="qer_quality" value="0" min="0"> </div> <div class="input-item"> <label for="qer_ethics">â–¶ å°ˆæ¥­å€«ç†ç©åˆ†ï¼š</label> <input type="number" id="qer_ethics" value="0" min="0"> </div> <div class="input-item"> <label for="qer_regulation">â–¶ å°ˆæ¥­æ³•è¦ç©åˆ†ï¼š</label> <input type="number" id="qer_regulation" value="0" min="0"> </div> </fieldset>
          <fieldset> <legend>å››å¤§å¿…ä¿®</legend> <div class="input-item"> <label for="mand_fire">â–¶ æ¶ˆé˜²å®‰å…¨ç©åˆ†ï¼š</label> <input type="number" id="mand_fire" value="0" min="0"> </div> <div class="input-item"> <label for="mand_er">â–¶ ç·Šæ€¥æ‡‰è®Šç©åˆ†ï¼š</label> <input type="number" id="mand_er" value="0" min="0"> </div> <div class="input-item"> <label for="mand_inf">â–¶ æ„ŸæŸ“ç®¡åˆ¶ç©åˆ†ï¼š</label> <input type="number" id="mand_inf" value="0" min="0"> </div> <div class="input-item"> <label for="mand_gen">â–¶ æ€§åˆ¥æ•æ„Ÿåº¦ç©åˆ†ï¼š</label> <input type="number" id="mand_gen" value="0" min="0"> </div> </fieldset>
          <fieldset> <legend>åŸä½æ°‘èˆ‡å¤šå…ƒæ–‡åŒ–ç©åˆ†</legend> <div class="input-item"> <label for="pre_change_cultural">â–¶ 112-06-02 å‰å–å¾—ä¹‹æ–‡åŒ–ç©åˆ†ç¸½åˆ†ï¼š</label> <input type="number" id="pre_change_cultural" value="0" min="0"> <small>æ­¤éƒ¨åˆ†æœ€é«˜æ¡è¨ˆ 2 åˆ†</small> </div> <p>è«‹è¼¸å…¥**å°å¡ç”Ÿæ•ˆå¾Œ**ï¼Œå„å¹´åº¦çš„åŸä½æ°‘æ—æ–‡åŒ– & å¤šå…ƒæ—ç¾¤æ–‡åŒ–ç©åˆ†ï¼ˆ112-06-03 èµ·ï¼Œæ¯å¹´å„éœ€ 1 åˆ†ï¼‰</p> <div id="yearly-cultural-inputs"> <p style="color: grey;">è«‹å…ˆè¼¸å…¥å°å¡ç”Ÿæ•ˆæ—¥æœŸä¸¦é»æ“Šã€Œè¨ˆç®—æ•ˆæœŸã€</p> </div> </fieldset>
          <fieldset> <legend>ç¶²è·¯å­¸ç¿’ç©åˆ†</legend> <div class="input-item"> <label for="online_points">â–¶ ç¶²è·¯å­¸ç¿’ç©åˆ†ç¸½æ•¸ï¼š</label> <input type="number" id="online_points" value="0" min="0"> <small>æ‰€æœ‰èª²ç¨‹ä¸­ä¾†è‡ªç¶²è·¯å­¸ç¿’çš„ç©åˆ†åŠ ç¸½ï¼Œä¸Šé™ 40 åˆ†</small> </div> </fieldset>
          <button id="submit-button" onclick="submitEvaluation()">ğŸ” é€å‡ºå¯©æŸ¥</button>
        </section>
    </div>

    <section id="result-section" style="display: none;"> <h2>ğŸ” å¯©æŸ¥çµæœï¼š</h2> <div id="result-summary"></div> <div id="result-details"></div> <pre id="raw-result" style="display:none;"></pre> </section>

    <div class="qa-container" id="qa-section"> <section> <h2>ç©åˆ†è¦å®š å¸¸è¦‹å•ç­” (Q&A)</h2> <input type="search" id="qa-search" placeholder="&#128269; æœå°‹å•ç­”é—œéµå­— (ä¾‹å¦‚: éæœŸã€æ–‡åŒ–ã€ç¶²è·¯)" onkeyup="filterQA()"> <p id="qa-no-results" style="display: none; color: grey; text-align: center; margin-top: 15px;">æ‰¾ä¸åˆ°ç›¸ç¬¦çš„å•ç­”ã€‚</p>
        <h3 class="qa-category">ç©åˆ†è¨ˆç®—è¦å‰‡</h3>
        <details> <summary>Q: å–å¾—é•·ç…§äººå“¡èªè­‰(é•·ç…§å°å¡)å‰ä¸Šéçš„èª²ï¼Œå¯ä»¥ç®—ç©åˆ†å—ï¼Ÿ</summary> <div class="answer"> <p><strong>A:</strong> <strong>ä¸è¡Œã€‚</strong></p> <p>æ ¹æ“šè¾¦æ³•ç¬¬9æ¢ï¼Œé•·ç…§äººå“¡æ‡‰è‡ªã€Œ<strong>èªè­‰è­‰æ˜æ–‡ä»¶ç”Ÿæ•ˆæ—¥èµ·</strong>ã€ï¼Œæ¯6å¹´æ¥å—ç¹¼çºŒæ•™è‚²èª²ç¨‹ã€‚ å› æ­¤ï¼Œåœ¨é•·ç…§å°å¡ç”Ÿæ•ˆæ—¥ä¹‹å‰å–å¾—çš„èª²ç¨‹ç©åˆ†ï¼Œä¸äºˆæ¡èªã€‚</p> </div> </details>
        <details> <summary>Q: Level I (é•·ç…§å…±åŒè¨“ç·´èª²ç¨‹) å¯ä»¥ç®—æ˜¯ç¹¼çºŒæ•™è‚²ç©åˆ†å—ï¼Ÿ</summary> <div class="answer"> <p><strong>A:</strong> <strong>ä¸è¡Œã€‚</strong></p> <p>Level I å±¬æ–¼æˆç‚ºé•·ç…§äººå“¡å‰çš„ã€Œ<strong>è³‡æ ¼è¨“ç·´èª²ç¨‹</strong>ã€ã€‚ ã€Œç¹¼çºŒæ•™è‚²ç©åˆ†ã€æ˜¯æŒ‡å–å¾—é•·ç…§äººå“¡æœå‹™è­‰æ˜(é•·ç…§å°å¡) *ä¹‹å¾Œ* æ‰€ä¸Šçš„èª²ç¨‹ã€‚å…©è€…ç›®çš„ä¸åŒï¼Œå› æ­¤è³‡æ ¼è¨“ç·´èª²ç¨‹ä¸èƒ½ç®—æ˜¯ç¹¼çºŒæ•™è‚²ç©åˆ†ã€‚</p> </div> </details>
        <details> <summary>Q: é•·ç…§å°å¡æ›´æ–°éœ€è¦å“ªäº›ç©åˆ†ï¼Ÿå¿…ä¿®èª²ç¨‹æœ‰å“ªäº›ï¼Ÿ</summary> <div class="answer"> <p><strong>A:</strong> èªè­‰æ•ˆæœŸ6å¹´å…§ï¼Œç©åˆ†æ‡‰ç¬¦åˆä»¥ä¸‹æ‰€æœ‰æ¢ä»¶ï¼š</p> <ul> <li><strong>ç¸½ç©åˆ†ï¼š</strong> åˆè¨ˆè‡³å°‘ <strong>120 é»</strong>ã€‚</li> <li><strong>èª²ç¨‹å±¬æ€§ (A+B)ï¼š</strong> <ul> <li><strong>å°ˆæ¥­èª²ç¨‹ (A)ï¼š</strong> è‡³å°‘ <strong>84 é»</strong>ã€‚</li> <li><strong>å°ˆæ¥­å“è³ªã€å°ˆæ¥­å€«ç†ã€å°ˆæ¥­æ³•è¦ (B)ï¼š</strong> é€™ä¸‰é …åˆè¨ˆè‡³å°‘ <strong>24 é»</strong>ï¼Œä¸”ä¸‰é …éƒ½<strong>ä¸å¯ç‚º 0</strong>ã€‚ (ä¸Šé™ç‚º 36 é»)ã€‚</li> </ul> </li> <li><strong>å››å¤§å¿…ä¿® (C)ï¼š</strong> <ul> <li>æ¶ˆé˜²å®‰å…¨ã€ç·Šæ€¥æ‡‰è®Šã€æ„ŸæŸ“ç®¡åˆ¶ã€æ€§åˆ¥æ•æ„Ÿåº¦ã€‚</li> <li>é€™å››é …åˆè¨ˆè‡³å°‘ <strong>10 é»</strong>ï¼Œä¸”å››é …éƒ½<strong>ä¸å¯ç‚º 0</strong>ã€‚</li> </ul> </li> <li><strong>æ–‡åŒ–å¿…ä¿® (D)ï¼š</strong> è«‹åƒè€ƒä¸‹ä¸€é¡Œï¼Œæ­¤é …æœ‰æ–°èˆŠåˆ¶åˆ†åˆ¥ã€‚</li> <li><strong>å¯¦é«”/ç¶²è·¯ï¼š</strong> <ul> <li><strong>ç¶²è·¯èª²ç¨‹ (ç·šä¸Š)ï¼š</strong> ç©åˆ†æ¡è¨ˆä¸Šé™ç‚º <strong>40 é»</strong>ã€‚</li> <li><strong>å¯¦é«”èª²ç¨‹ï¼š</strong> ç©åˆ†è‡³å°‘æ‡‰é” <strong>80 é»</strong> (ç¸½åˆ†120 - ç¶²è·¯40 = å¯¦é«”80)ã€‚</li> </ul> </li> </ul> </div> </details>
        <details> <summary>Q:ã€ŒåŸä½æ°‘æ—ã€èˆ‡ã€Œå¤šå…ƒæ—ç¾¤ã€èª²ç¨‹çš„ç©åˆ†å¦‚ä½•è¨ˆç®—ï¼Ÿ (æ–°èˆŠåˆ¶)</summary> <div class="answer"> <p><strong>A:</strong> é€™æ˜¯æœ€é—œéµçš„è¦å‰‡ï¼Œä»¥æ‚¨çš„ã€Œé•·ç…§å°å¡æœ‰æ•ˆæœŸé™ã€æˆ–ã€Œèªè­‰æ›´æ–°æ—¥ã€åœ¨å“ªå€‹å€é–“ç‚ºæº–ï¼š</p> <ul> <li><strong>èˆŠåˆ¶ (èªè­‰æœ‰æ•ˆæœŸé™åœ¨ 113å¹´6æœˆ2æ—¥ ä»¥å‰)ï¼š</strong><br> ä¿®ç¿’ã€ŒåŸä½æ°‘æ—èˆ‡å¤šå…ƒæ—ç¾¤æ–‡åŒ–æ•æ„Ÿåº¦åŠèƒ½åŠ›ã€èª²ç¨‹ (åŸåç¨±ã€Œå¤šå…ƒæ—ç¾¤æ–‡åŒ–ã€)ï¼Œåˆè¨ˆè‡³å°‘ <strong>2 é»</strong> å³å¯ã€‚</li> <li><strong>æ–°åˆ¶ (èªè­‰æœ‰æ•ˆæœŸé™åœ¨ 113å¹´6æœˆ3æ—¥ ä»¥å¾Œ)ï¼š</strong><br> å¿…é ˆ<strong>æ¯å¹´</strong>ä¿®ç¿’ã€ŒåŸä½æ°‘æ—æ–‡åŒ–æ•æ„Ÿåº¦åŠèƒ½åŠ›ã€èª²ç¨‹è‡³å°‘ <strong>1 é»</strong>ï¼Œ*ä¸¦ä¸”*ã€Œå¤šå…ƒæ—ç¾¤æ–‡åŒ–æ•æ„Ÿåº¦åŠèƒ½åŠ›ã€èª²ç¨‹è‡³å°‘ <strong>1 é»</strong>ã€‚ (6å¹´åˆè¨ˆ12é»)ã€‚</li> </ul> <p><strong>é—œéµï¼š</strong> åˆ¤æ–·æ–°èˆŠåˆ¶çš„æ—¥æœŸï¼Œæ˜¯ä»¥æ‚¨ã€Œ<strong>é•·ç…§å°å¡ä¸Šè¨˜è¼‰çš„æœ‰æ•ˆæœŸé™</strong>ã€ç‚ºä¸»ï¼Œ*ä¸æ˜¯*çœ‹æ‚¨é€å‡ºç”³è«‹çš„æ—¥æœŸã€‚</p> </div> </details>
        <details> <summary>Q: (æ–°åˆ¶) å¦‚æœæˆ‘ç¬¬ä¸€å¹´å°±æŠŠæ–‡åŒ–ç©åˆ† 12 é»éƒ½ä¸Šå®Œäº†ï¼Œä¹‹å¾Œå¯ä»¥ä¸ç”¨ä¸Šäº†å—ï¼Ÿ</summary> <div class="answer"> <p><strong>A:</strong> <strong>ä¸è¡Œã€‚</strong> æ³•è¦è¦å®šæ˜¯ã€Œ<strong>æ¯å¹´å„1é»ç‚ºåŸå‰‡</strong>ã€ã€‚ å³ä½¿å‰ä¸€å¹´åº¦å·²å–å¾—è¶…é 1 é»ï¼ŒæŒ‰æ³•ä»¤è¦å®šï¼Œä¸‹å¹´åº¦è©²èª²ç¨‹ä»æ‡‰å†å­¸ç¿’ã€‚ é€™æ˜¯ç‚ºäº†ç¢ºä¿æ–‡åŒ–æ•æ„Ÿåº¦æ˜¯æŒçºŒç´¯ç©å…§åŒ–çš„ã€‚</p> </div> </details>
        <details> <summary>Q:ã€Œç›´æ’­ã€æˆ–ã€Œè¦–è¨Šã€èª²ç¨‹ï¼Œç®—æ˜¯ã€Œå¯¦é«”ã€é‚„æ˜¯ã€Œç¶²è·¯ã€ç©åˆ†ï¼Ÿ</summary> <div class="answer"> <p><strong>A:</strong> è¦–ç‚ºã€Œ<strong>å¯¦é«”èª²ç¨‹</strong>ã€ã€‚</p> <p>è‡ª 112å¹´10æœˆ13æ—¥ èµ·ï¼Œèª²ç¨‹ä»¥ç·šä¸ŠåŒæ­¥æ–¹å¼ (ä¾‹å¦‚ç›´æ’­ã€è¦–è¨Š) è¾¦ç†è€…ï¼Œè¦–ç‚ºã€Œå¯¦é«”èª²ç¨‹ã€ç©åˆ†ã€‚</p> <p>(<strong>ç¶²è·¯èª²ç¨‹</strong>æ˜¯æŒ‡é‚£äº› "äº‹å‰é éŒ„å¥½"ï¼Œå¯éš¨æ™‚ä¸Šç¶²å­¸ç¿’çš„èª²ç¨‹)ã€‚</p> </div> </details>

        <h3 class="qa-category">ç”³è«‹èˆ‡æ›´æ–°</h3>
        {/* (â˜… æ–°å¢ Q&A 1) */}
        <details>
            <summary>Q: èª²ç¨‹å‰›çµè¨“ï¼Œç‚ºä»€éº¼ç©åˆ†ç³»çµ±ä¸ŠæŸ¥ä¸åˆ°ï¼Ÿ</summary>
            <div class="answer">
                <p><strong>A:</strong> ç©åˆ†ç™»éŒ„éœ€è¦ä½œæ¥­æ™‚é–“ã€‚</p>
                <p>é–‹èª²å–®ä½æœƒåœ¨å®Œè¨“ 14 å¤©å…§ï¼Œå°‡å­¸å“¡åå–®åŠèª²ç¨‹è³‡æ–™é€äº¤ç©åˆ†å¯©æŸ¥å–®ä½ã€‚å¯©æŸ¥å–®ä½éœ€è¦äººå·¥å¯©æ ¸ï¼Œç„¶å¾Œå†ç™»éŒ„åˆ°ç³»çµ±ä¸­ï¼Œé€™æ•´å€‹æµç¨‹å¤§ç´„éœ€è¦ <strong>30 ~ 90 å¤©</strong>ã€‚</p>
                <p>ğŸ‘‰ é‡åˆ°ç©åˆ†æœªç™»éŒ„çš„ç‹€æ³ï¼Œè«‹å…ˆ**è¯ç¹«æ‚¨çš„ã€Œé–‹èª²å–®ä½ã€**è©¢å•é€²åº¦ã€‚</p>
                <p>ğŸ‘‰ <strong>é•·æœŸç…§é¡§å°ˆæ¥­äººå“¡æ•¸ä½å­¸ç¿’å¹³å°ï¼š</strong> ç·šä¸Šèª²ç¨‹é€šå¸¸æ˜¯é€šéå¾Œçš„**ä¸‹ä¸€å€‹æœˆ**çµ±ä¸€ç™»éŒ„ (ä¾‹å¦‚ 114/05/22 ä¸Šå®Œï¼Œç™»éŒ„æ™‚é–“æœƒåœ¨ 114/06/01 ~ 114/06/30 ä¹‹é–“)ï¼Œå¯¦éš›ç‹€æ³ä¾å¹³å°å…¬å‘Šç‚ºæº–ã€‚</p>
            </div>
        </details>
        
        {/* (â˜… æ–°å¢ Q&A 2) */}
        <details>
            <summary>Q: æˆ‘é‚„æ²’æ‹¿åˆ°é•·ç…§å°å¡ï¼Œå…ˆå»ä¸Šèª²å¯ä»¥ç®—ç©åˆ†å—ï¼Ÿ</summary>
            <div class="answer">
                <p><strong>A:</strong> <strong>ä¸è¡Œï¼Œç„¡æ³•ç´¯ç©ç©åˆ†ã€‚</strong></p>
                <p>å¾ã€Œç…§é¡§æœå‹™å“¡è·å‰è¨“ç·´ã€å®Œè¨“å¾Œï¼Œåˆ°æˆåŠŸç”³è«‹ä¸¦æ‹¿åˆ°é•·ç…§å°å¡ï¼Œä¸­é–“ç´„æœ‰ 14 ~ 30 å¤©çš„è¡Œæ”¿ä½œæ¥­æ™‚é–“ã€‚å¦‚æœæ‚¨åœ¨**æ‹¿åˆ°é•·ç…§å°å¡ä¹‹å‰**å°±å…ˆä¸Šäº†ç¹¼çºŒæ•™è‚²èª²ç¨‹ï¼Œé€™äº›ç©åˆ†æ˜¯**ç„¡æ³•è¢«æ¡èª**çš„ã€‚</p>
                <p>ğŸ‘‰ <strong>é‡é»ï¼š</strong> é•·ç…§ç©åˆ†**ç„¡æ³•äº‹å¾Œè£œç™»**ã€‚æ‚¨ä¸Šèª²çš„ã€Œèª²ç¨‹æ—¥æœŸã€å¿…é ˆåœ¨æ‚¨é•·ç…§å°å¡ä¸Šçš„ã€Œ**æ ¸ç™¼æ—¥æœŸ**ã€**ä¹‹å¾Œ**æ‰è¡Œã€‚</p>
            </div>
        </details>
        
        <details> <summary>Q: (æ–°åˆ¶) æ¯å¹´éƒ½è¦ä¿®æ–‡åŒ–æ•æ„Ÿåº¦èª²ç¨‹å—ï¼Ÿå¦‚æœæœ‰ä¸€å¹´å¿˜è¨˜ä¿®æ€éº¼è¾¦ï¼Ÿ</summary> <div class="answer"> <p><strong>A:</strong> ä¾è¦å®šï¼Œé©ç”¨æ–°åˆ¶ (æŒ‡é•·ç…§å°å¡æœ‰æ•ˆæœŸé™åœ¨ <strong>113å¹´6æœˆ3æ—¥ ä¹‹å¾Œ</strong>è€…)ï¼Œæ‚¨æ¯å¹´éƒ½å¿…é ˆä¿®ç¿’ã€ŒåŸä½æ°‘æ—ã€åŠã€Œå¤šå…ƒæ—ç¾¤ã€æ–‡åŒ–æ•æ„Ÿåº¦èª²ç¨‹å„ 1 é» (æ¯å¹´åˆè¨ˆ 2 é»)ã€‚</p> <p>å¦‚æœæ‚¨åœ¨ 6 å¹´æœ‰æ•ˆæœŸå…§çš„æŸä¸€å¹´å¿˜è¨˜ä¿®ç¿’ï¼Œæ‚¨å°‡**ç„¡æ³•åœ¨æœ‰æ•ˆæœŸé™å±†æ»¿å‰**å®Œæˆæ›´æ–°ã€‚ä½†ä¸ç”¨å¤ªæ“”å¿ƒï¼Œæ‚¨ä»ç„¶å¯ä»¥é€éã€Œ<strong>é€¾æœŸæ›´æ–°</strong>ã€çš„æ–¹å¼ä¾†è£œæ•‘ã€‚</p> <p>é€¾æœŸæ›´æ–°æ™‚ï¼Œç©åˆ†è¨ˆç®—æ–¹å¼æœƒæ”¹è®Šï¼š</p> <ul> <li>æ”¿åºœæœƒå¾æ‚¨<strong>æå‡ºç”³è«‹æ›´æ–°çš„é‚£ä¸€å¤©</strong>å¾€å‰æ¨ç®— 6 å¹´ï¼Œä¾†è¨ˆç®—æ‚¨é€™æ®µæœŸé–“çš„ç©åˆ†æ˜¯å¦ç¬¦åˆæ‰€æœ‰è¦å®šï¼ˆåŒ…æ‹¬ç¸½åˆ† 120 é»ã€æ‰€æœ‰å¿…ä¿®é …ç›®ï¼Œä»¥åŠè£œé½Šæ¯å¹´æ‡‰æœ‰çš„æ–‡åŒ–ç©åˆ†ï¼‰ã€‚</li> </ul> <p><strong>èˆ‰ä¾‹ï¼š</strong></p> <ul> <li>å‡è¨­å°å¡æ•ˆæœŸæ˜¯ 113å¹´7æœˆ1æ—¥ ~ 119å¹´6æœˆ30æ—¥ (é©ç”¨æ–°åˆ¶)ã€‚</li> <li>æ‚¨åœ¨ç¬¬ 3 å¹´ (115.7.1 ~ 116.6.30) å¿˜è¨˜ä¿®æ–‡åŒ–ç©åˆ†ã€‚</li> <li>æ‚¨ç„¡æ³•åœ¨ 119å¹´6æœˆ30æ—¥ å‰æ›´æ–°ã€‚</li> <li>æ‚¨åœ¨ 119å¹´8æœˆ1æ—¥ æ‰æå‡ºæ›´æ–°ç”³è«‹ã€‚</li> <li>æ”¿åºœæœƒå¯©æ ¸æ‚¨åœ¨ <strong>113å¹´8æœˆ1æ—¥ ~ 119å¹´7æœˆ31æ—¥</strong> (ç”³è«‹æ—¥å¾€å‰æ¨6å¹´) é€™æ®µæœŸé–“çš„ç©åˆ†ã€‚</li> </ul> <p>ğŸ‘‰ æ‰€ä»¥ï¼Œå°±ç®—ä¸­é–“æœ‰æ¼æ‰ï¼Œé‚„æ˜¯æœ‰æ©Ÿæœƒ<strong>äº‹å¾Œè£œèª²</strong>ï¼Œåªæ˜¯æœƒè®Šæˆã€Œé€¾æœŸæ›´æ–°ã€ï¼Œæ–°çš„è­‰ç…§æ•ˆæœŸä¹Ÿæœƒå¾æ›´æ–°é€šéæ—¥æ‰é–‹å§‹è¨ˆç®—ã€‚</p> </div> </details>
        <details> <summary>Q: æˆ‘çš„é•·ç…§å°å¡éæœŸäº†æ‰ç”³è«‹æ›´æ–°ï¼Œç©åˆ†å’Œæ•ˆæœŸå¦‚ä½•è¨ˆç®—ï¼Ÿ</summary> <div class="answer"> <p><strong>A:</strong> <strong>ä»å¯æ›´æ–°</strong>ï¼Œä½†è¦å‰‡ä¸åŒï¼š</p> <ul> <li><strong>ç©åˆ†è¨ˆç®—ï¼š</strong> ä»¥æ‚¨ "**æå‡ºç”³è«‹æ›´æ–°æ—¥**" å¾€å‰æ¨ç®— 6 å¹´å…§ï¼Œå¿…é ˆå®Œæˆ 120 é»ç©åˆ† (ä¸”ç¬¦åˆæ‰€æœ‰å¿…ä¿®è¦å®šï¼ŒåŒ…å«æ¯å¹´æ–‡åŒ–ç©åˆ†)ã€‚</li> <li><strong>æ–°æ•ˆæœŸè¨ˆç®—ï¼š</strong> æ–°çš„é•·ç…§å°å¡æ•ˆæœŸï¼Œæ˜¯å¾ "**ç”³è«‹æ›´æ–°ä¸”å¯©æ ¸é€šé**" çš„æ—¥æœŸé–‹å§‹å¾€å¾Œè¨ˆç®— 6 å¹´ã€‚</li> <li><strong>ç©åˆ†æ­¸é›¶ï¼š</strong> ç©åˆ†æœƒå¾æ–°çš„ç”Ÿæ•ˆæ—¥èµ·é‡æ–°æ­¸é›¶èµ·ç®—ã€‚(èˆŠå¡æ•ˆæœŸå…§å¤šä¿®çš„ç©åˆ†ä¸æœƒä¿ç•™)</li> </ul> <p><strong>èˆ‰ä¾‹ï¼š</strong></p> <ul> <li>å°å¡æ•ˆæœŸï¼š106å¹´6æœˆ3æ—¥ ~ 112å¹´6æœˆ2æ—¥ã€‚</li> <li>ç”³è«‹æ›´æ–°æ—¥ï¼š115å¹´4æœˆ1æ—¥ã€‚</li> <li>ç©åˆ†æ¡è¨ˆæœŸé–“ï¼š<strong>109å¹´4æœˆ1æ—¥ ~ 115å¹´3æœˆ31æ—¥</strong> (é€™æ®µæœŸé–“éœ€æ»¿ 120 é»åŠæ‰€æœ‰å¿…ä¿®)ã€‚</li> <li>109å¹´3æœˆä»¥å‰çš„ç©åˆ†ä¸ç®—ã€‚</li> <li>è‹¥å¯©æ ¸é€šéï¼Œæ–°å¡æ•ˆæœŸï¼š115å¹´4æœˆ1æ—¥ ~ 121å¹´3æœˆ31æ—¥ã€‚</li> </ul> <p>ğŸ”” <strong>å…©å€‹å°å®åš€ï¼š</strong></p> <ul> <li>â° ä¸è¦æ‹–åˆ°å°å¡å¿«éæœŸæ‰å»ç”³è«‹æ›´æ–°ï¼Œä»¥å…å› ç‚ºç©åˆ†ä¸è¶³æˆ–è³‡æ–™ä¸é½Šè€Œå°è‡´è­‰ç…§å¤±æ•ˆã€‚</li> <li>âœï¸ é€¾æœŸæ›´æ–°æœƒå°è‡´ç©åˆ†è¨ˆç®—ç¯„åœæ”¹è®Šï¼Œå¯èƒ½è®“æ‚¨åœ¨èˆŠå¡æ•ˆæœŸæ—©æœŸä¿®çš„ç©åˆ†å¤±æ•ˆã€‚</li> </ul> </div> </details>
        <details> <summary>Q: å°å¡æ•ˆæœŸå…§æ²’ä¸Šæ»¿ 120 é»ç©åˆ†ï¼ŒéæœŸäº†é‚„èƒ½ç”³è«‹æ›´æ–°å—ï¼Ÿ</summary> <div class="answer"> <p><strong>A:</strong> <strong>å¯ä»¥ï¼</strong>è™•ç†æ–¹å¼èˆ‡ä¸Šä¸€é¡Œã€Œå°å¡éæœŸå¾Œç”³è«‹æ›´æ–°ã€å®Œå…¨ç›¸åŒã€‚</p> <p>é‡é»åœ¨æ–¼ï¼Œä¸€æ—¦æ‚¨çš„é•·ç…§å°å¡<strong>å·²éæœŸ</strong>ï¼Œç„¡è«–æ‚¨ä¹‹å‰ç©åˆ†æ˜¯å¦è¶³å¤ ï¼Œéƒ½é©ç”¨ã€Œé€¾æœŸæ›´æ–°ã€çš„è¦å‰‡ï¼š</p> <ul> <li>ç©åˆ†è¨ˆç®—ï¼šçœ‹æ‚¨<strong>ç”³è«‹æ›´æ–°ç•¶å¤©å¾€å‰æ¨ 6 å¹´</strong>çš„ç©åˆ†ã€‚</li> <li>æ–°å¡æ•ˆæœŸï¼šå¾<strong>å¯©æ ¸é€šéæ—¥</strong>èµ·ç®— 6 å¹´ã€‚</li> </ul> <p>ğŸ‘‰ åªè¦æ‚¨åœ¨ç”³è«‹æ›´æ–°æ™‚ï¼Œèƒ½æå‡ºã€Œç”³è«‹ç•¶å¤©å¾€å‰æ¨ 6 å¹´å…§ã€å·²å®Œæˆ 120 é» (å«æ‰€æœ‰å¿…ä¿®) çš„è­‰æ˜ï¼Œå°±å¯ä»¥æˆåŠŸæ›´æ–°ã€‚</p> </div> </details>
        <details> <summary>Q: æˆ‘åŒæ™‚æœ‰ã€Œç…§æœå“¡ã€å’Œã€Œå±…æœç£å°ã€å…©å¼µé•·ç…§å°å¡ï¼Œç©åˆ†å¯ä»¥å…±ç”¨å—ï¼Ÿ</summary> <div class="answer"> <p><strong>A:</strong> <strong>å¯ä»¥</strong>ï¼Œä½†æœ‰æ¢ä»¶ã€‚</p> <p>å¦‚æœç¹¼çºŒæ•™è‚²ç©åˆ†çš„ã€Œå®Œæˆæ™‚é–“ã€ï¼ŒåŒæ™‚è½åœ¨æ¯å¼µèªè­‰è­‰æ˜æ–‡ä»¶çš„ã€Œæœ‰æ•ˆæœŸé–“ã€ä¹‹å…§ï¼Œè©²ç©åˆ†å¯åœ¨å„å¼µèªè­‰è­‰æ˜æ–‡ä»¶ä¸Šå‡è¢«è¨ˆç®—ã€‚</p> <p><strong>æ³¨æ„ï¼š</strong> é›–ç„¶ç©åˆ†å¯å…±ç”¨ï¼Œä½†æ›´æ–°æ™‚ï¼Œæ‚¨åªèƒ½ã€Œ<strong>æ“‡ä¸€</strong>ã€*å¯¦éš›æœ‰åœ¨æä¾›æœå‹™*çš„è­‰æ˜æ–‡ä»¶ç”³è«‹æ›´æ–°ã€‚</p> </div> </details>
        <details> <summary>Q: æˆ‘ç›®å‰æ²’æœ‰åœ¨é•·ç…§æ©Ÿæ§‹å·¥ä½œäº†ï¼Œé‚„å¯ä»¥ç´¯ç©ç©åˆ†å—ï¼Ÿ</summary> <div class="answer"> <p><strong>A:</strong> <strong>å¯ä»¥ï¼</strong></p> <p>ç¹¼çºŒæ•™è‚²ç©åˆ†æ˜¯è·Ÿè‘—æ‚¨çš„<strong>å€‹äººé•·ç…§å°å¡ (èªè­‰è­‰æ˜æ–‡ä»¶)</strong>ï¼Œè€Œä¸æ˜¯è·Ÿè‘—æ‚¨çš„å·¥ä½œæ©Ÿæ§‹ã€‚</p> <p>åªè¦æ‚¨çš„é•·ç…§å°å¡ä»åœ¨æœ‰æ•ˆæœŸå…§ï¼Œå³ä½¿æ‚¨ç›®å‰å¾…æ¥­ã€è½‰è·æˆ–å¾äº‹éé•·ç…§ç›¸é—œå·¥ä½œï¼Œæ‚¨ä»ç„¶å¯ä»¥åƒåŠ é•·ç…§ç¹¼çºŒæ•™è‚²èª²ç¨‹ä¸¦ç´¯ç©ç©åˆ†ã€‚é€™äº›ç©åˆ†æœƒè¨˜éŒ„åœ¨æ‚¨çš„å€‹äººåä¸‹ï¼Œæœªä¾†è‹¥è¦é‡æ–°æŠ•å…¥é•·ç…§æœå‹™ä¸¦ç”³è«‹æ›´æ–°èªè­‰æ™‚å¯ä»¥ä½¿ç”¨ã€‚</p> </div> </details>

        {/* (â˜… æ–°å¢ Q&A 3) */}
        <details>
            <summary>Q: ä¸Šèª²æœŸé–“å¯ä»¥åŒæ™‚ç”³å ±é•·ç…§æœå‹™çµ¦ä»˜ (è·‘å»æœå‹™å€‹æ¡ˆ) å—ï¼Ÿ</summary>
            <div class="answer">
                <p><strong>A:</strong> <strong>ç•¶ç„¶ä¸è¡Œã€‚</strong></p>
                <p>ç¹¼çºŒæ•™è‚²çš„ç›®çš„æ˜¯å¸Œæœ›æœå‹™äººå“¡èƒ½å°ˆå¿ƒé€²ä¿®ã€ç²¾é€²æŠ€è¡“ã€‚å¦‚æœåœ¨ï¼ˆå°¤å…¶æ˜¯è¦–è¨Šï¼‰èª²ç¨‹æœŸé–“ï¼Œè¢«æŸ¥æ ¸åˆ°æœ‰åŒæ­¥ç…§é¡§å€‹æ¡ˆã€ç”³å ±æœå‹™çµ¦ä»˜çš„æƒ…æ³ï¼Œ</p>
                <p>ğŸ‘‰ é€™ç¨®è¡Œç‚ºé•åäº†èª²ç¨‹è¦å®šï¼Œæ¥µæœ‰å¯èƒ½é€ æˆæ‚¨è©²å ‚èª²çš„**ç©åˆ†è¢«å–æ¶ˆ**ï¼ŒåŒæ™‚**æœå‹™çµ¦ä»˜ä¹Ÿå¯èƒ½ä¸è¢«æ ¸å‡†**ï¼Œé€ æˆå…©é ­ç©ºï¼</p>
            </div>
        </details>
      </section> </div>

    <section id="links-section">
        <h2>ç›¸é—œé€£çµ</h2>
        <ul> <li><a href="https://ltc-learning.org/mooc/index.php" target="_blank" rel="noopener noreferrer">é•·æœŸç…§é¡§å­¸ç¿’å¹³å° (å…è²»ç·šä¸Šèª²ç¨‹)</a></li> <li><a href="https://ltcpap.mohw.gov.tw/molc/eg999/index" target="_blank" rel="noopener noreferrer">è¡›ç”Ÿç¦åˆ©éƒ¨é•·ç…§æ©Ÿæ§‹æš¨é•·ç…§äººå“¡ç›¸é—œç®¡ç†è³‡è¨Šç³»çµ± (å®˜æ–¹ç©åˆ†æŸ¥è©¢)</a></li> <li><a href="https://1966.gov.tw/LTC/cp-6708-77733-207.html" target="_blank" rel="noopener noreferrer">å„ç¸£å¸‚è¾¦ç†é•·ç…§äººå“¡èªè­‰ã€è£œ/æ›ç™¼ã€æ›´æ–°èªè­‰ç”³è«‹è¯çµ¡è³‡è¨Š</a></li> </ul>
        <p><strong>ç¶²è·¯ç©åˆ†æ³¨æ„äº‹é …</strong>ï¼š<br> ä¾112å¹´10æœˆ11æ—¥ä¿®æ­£å…¬å¸ƒä¹‹è¾¦æ³•é™„ä»¶äºŒè¦å®šï¼Œè‡ª112å¹´10æœˆ13æ—¥èµ·ï¼ŒåƒåŠ **ç¶²è·¯èª²ç¨‹** (æŒ‡éåŒæ­¥ã€é éŒ„èª²ç¨‹) å–å¾—ä¹‹ç©åˆ†ï¼Œæ–¼ç”³è«‹æ›´æ–°èªè­‰æ™‚ï¼Œ**åˆè¨ˆæ¡è¨ˆä¸Šé™ç‚º 40 é»**ã€‚</p>
    </section>

  </main>

  <a href="#page-top" class="back-to-top">â–²<span class="tooltip-text">å›åˆ°é ‚éƒ¨</span></a>

  <script>
    // --- Helper Functions ---
    function getNum(id) { const el = document.getElementById(id); if (!el) { console.warn(`Element with ID ${id} not found.`); return 0; } const val = parseFloat(el.value); return isNaN(val) ? 0 : val; }
    function minguoToGregorian(minguoStr) { if (!minguoStr || !/^\d{3}-\d{1,2}-\d{1,2}$/.test(minguoStr)) return null; try { const parts = minguoStr.split('-'); const year = parseInt(parts[0], 10) + 1911; const month = parseInt(parts[1], 10); const day = parseInt(parts[2], 10); if (month < 1 || month > 12 || day < 1 || day > 31) return null; const date = new Date(year, month - 1, day); if (date.getFullYear() !== year || date.getMonth() !== month - 1 || date.getDate() !== day) { return null; } return date; } catch (e) { console.error("Date conversion error:", e); return null; } }
    function gregorianToMinguo(date) { if (!date) return ""; const year = date.getFullYear() - 1911; const month = (date.getMonth() + 1).toString().padStart(2, '0'); const day = date.getDate().toString().padStart(2, '0'); return `${year}-${month}-${day}`; }
    function addYears(date, years) { const newDate = new Date(date); newDate.setFullYear(newDate.getFullYear() + years); return newDate; }
    function subtractMonths(date, months) { const newDate = new Date(date); const originalDay = date.getDate(); newDate.setMonth(newDate.getMonth() - months); if (newDate.getDate() !== originalDay) { newDate.setDate(0); } return newDate; }
    function subtractDays(date, days) { const newDate = new Date(date); newDate.setDate(newDate.getDate() - days); return newDate; }
    
    // --- Core Functions ---
    let validityPeriods = []; const RULE_CHANGE_DATE_MINGUO = "112-06-02"; const RULE_CHANGE_DATE = minguoToGregorian(RULE_CHANGE_DATE_MINGUO);

    async function calculateDates() {
        const calcButton = document.getElementById('calc-dates-button'); const startInput = document.getElementById('start_minguo'); const startMinguo = startInput.value; const startDate = minguoToGregorian(startMinguo); const displayDiv = document.getElementById('date-display'); const yearlyInputsDiv = document.getElementById('yearly-cultural-inputs'); validityPeriods = [];
        calcButton.disabled = true; calcButton.textContent = 'è¨ˆç®—ä¸­...'; startInput.classList.remove('is-invalid'); displayDiv.className = 'date-info-placeholder';
        try {
            if (!startDate) { throw new Error('æ—¥æœŸæ ¼å¼éŒ¯èª¤ï¼Œè«‹ä½¿ç”¨ YYY-MM-DD'); }
            const expiryDate = addYears(startDate, 6); const renewalStartDate = subtractMonths(expiryDate, 6); const expiryDateMinusOneDay = subtractDays(expiryDate, 1); const startDateFormatted = gregorianToMinguo(startDate); const expiryDateFormatted = gregorianToMinguo(expiryDateMinusOneDay); const renewalStartFormatted = gregorianToMinguo(renewalStartDate);
            displayDiv.className = 'date-info success';
            displayDiv.innerHTML = ` <p>ğŸ“… æœ‰æ•ˆæœŸé™ï¼š${startDateFormatted} ~ ${expiryDateFormatted}</p> <p>ğŸ“Œ å¯æ›è­‰æ—¥ï¼š${renewalStartFormatted} èµ·</p> <hr> <p><strong>æº«é¦¨æç¤ºï¼š</strong>å› æ”¿åºœä½œæ¥­éœ€å·¥ä½œå¤©ï¼Œå»ºè­°æ–¼<strong>å¯æ›è­‰æ—¥å¾Œå„˜æ—©æ›è­‰</strong>ï¼Œé¿å…é€¾æœŸå½±éŸ¿è³‡æ ¼ã€‚</p> <p><small><strong>æ³•è¦æé†’ï¼š</strong>ä¾ã€Šé•·ç…§æœå‹™æ³•ã€‹ç¬¬58æ¢ï¼Œè­‰ç…§é€¾æœŸæœªæ›´æ–°ä»æä¾›æœå‹™ï¼Œå¯è™• NT$3,000 ~ NT$15,000 ç½°é°ã€‚(è‹¥é€¾æœŸå¾Œæœªæä¾›æœå‹™å‰‡ç„¡å½±éŸ¿)</small></p> `;
            yearlyInputsDiv.innerHTML = '';
            for (let i = 0; i < 6; i++) { const yearStartDate = addYears(startDate, i); const yearEndDate = subtractDays(addYears(startDate, i + 1), 1); const period = { year: i + 1, start: yearStartDate, end: yearEndDate, startMinguo: gregorianToMinguo(yearStartDate), endMinguo: gregorianToMinguo(yearEndDate) }; validityPeriods.push(period); const isPostChangePeriodStart = period.start >= RULE_CHANGE_DATE; const requiredText = isPostChangePeriodStart ? "ï¼ˆæ­¤å¹´åº¦èµ·ï¼Œæ¯å¹´å„éœ€ 1 åˆ†ï¼‰" : "ï¼ˆâš  æ­¤å¹´åº¦ç©åˆ†è¨ˆå…¥ä¸Šæ–¹ 112-06-02 å‰ç¸½åˆ†ï¼Œæœ€å¤šè¨ˆç®—2åˆ†ï¼‰"; const defaultValue = 0; const yearDiv = document.createElement('div'); yearDiv.classList.add('yearly-input-group'); yearDiv.innerHTML = ` <h4>ç¬¬${period.year}å¹´ï¼š${period.startMinguo} ~ ${period.endMinguo} <small>${requiredText}</small></h4> <div class="input-item yearly-item"> <label for="year_${period.year}_ind">â–¶ åŸä½æ°‘æ—æ–‡åŒ–ç©åˆ†ï¼š</label> <input type="number" id="year_${period.year}_ind" value="${defaultValue}" min="0"> </div> <div class="input-item yearly-item"> <label for="year_${period.year}_mul">â–¶ å¤šå…ƒæ—ç¾¤æ–‡åŒ–ç©åˆ†ï¼š</label> <input type="number" id="year_${period.year}_mul" value="${defaultValue}" min="0"> </div> `; yearlyInputsDiv.appendChild(yearDiv); }
        } catch (e) {
            startInput.classList.add('is-invalid'); displayDiv.className = 'date-info error'; displayDiv.innerHTML = `<p>âŒ ${e.message}</p>`; yearlyInputsDiv.innerHTML = '<p style="color: grey;">è«‹å…ˆè¼¸å…¥æœ‰æ•ˆçš„ç”Ÿæ•ˆæ—¥æœŸ</p>';
        } finally {
            calcButton.disabled = false; calcButton.textContent = 'è¨ˆç®—æ•ˆæœŸ';
        }
    }

    async function submitEvaluation() {
        const submitButton = document.getElementById('submit-button'); console.log("submitEvaluation function called."); const startDate = minguoToGregorian(document.getElementById('start_minguo').value);
         if (!startDate || validityPeriods.length !== 6) { alert("è«‹å…ˆè¼¸å…¥æœ‰æ•ˆçš„å°å¡ç”Ÿæ•ˆæ—¥æœŸä¸¦é»æ“Šã€Œè¨ˆç®—æ•ˆæœŸã€ã€‚"); console.error("Evaluation aborted: Start date invalid or validity periods not calculated."); return; }
         submitButton.disabled = true; submitButton.textContent = 'å¯©æŸ¥ä¸­...';
         let yearlyCulturalPoints = []; try { yearlyCulturalPoints = validityPeriods.map(period => { const indId = `year_${period.year}_ind`; const mulId = `year_${period.year}_mul`; return { year: period.year, indigenous: getNum(indId), multicultural: getNum(mulId) }; }); } catch (e) { console.error("Error collecting yearly cultural points:", e); alert("è®€å–å¹´åº¦æ–‡åŒ–ç©åˆ†æ™‚ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹æª¢æŸ¥è¼¸å…¥æ¬„ä½ã€‚"); submitButton.disabled = false; submitButton.textContent = 'ğŸ” é€å‡ºå¯©æŸ¥'; return; }
        const payload = { professional_course: getNum('prof_course'), quality_ethics_regulation: getNum('qer_quality') + getNum('qer_ethics') + getNum('qer_regulation'), quality_points_raw: getNum('qer_quality'), ethics_points_raw: getNum('qer_ethics'), regulation_points_raw: getNum('qer_regulation'), mandatory: { fire_safety: getNum('mand_fire'), emergency_response: getNum('mand_er'), infection_control: getNum('mand_inf'), gender_sensitivity: getNum('mand_gen') }, pre_change_cultural_points: getNum('pre_change_cultural'), yearly_cultural_points: yearlyCulturalPoints, renewal_date: gregorianToMinguo(subtractDays(addYears(startDate, 6), 1)), online_points: getNum('online_points') };
        payload.fire_safety_raw = payload.mandatory.fire_safety; payload.emergency_response_raw = payload.mandatory.emergency_response; payload.infection_control_raw = payload.mandatory.infection_control; payload.gender_sensitivity_raw = payload.mandatory.gender_sensitivity;
        console.log("Payload to be sent:", JSON.stringify(payload, null, 2));
        const resultSection = document.getElementById('result-section'); const resultDetailsDiv = document.getElementById('result-details'); const rawResultPre = document.getElementById('raw-result'); const resultSummaryDiv = document.getElementById('result-summary');
        resultDetailsDiv.innerHTML = '<p>è¨ˆç®—ä¸­...</p>'; resultSummaryDiv.innerHTML = ''; resultSection.style.display = 'block';
        try {
            const res = await fetch('/api/evaluate', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
            console.log("API Response Status:", res.status); const data = await res.json(); console.log("Data received from API:", data); rawResultPre.textContent = JSON.stringify(data, null, 2);
            if (res.ok) { console.log("Calling displayResults..."); displayResults(payload, data); } else { console.error("API Error:", data.error); resultDetailsDiv.innerHTML = `<p style="color: red;">å¯©æŸ¥å¤±æ•—: ${data.error || 'æœªçŸ¥éŒ¯èª¤'}</p>`; resultSummaryDiv.innerHTML = `<div class="summary-card fail">âŒ å¯©æŸ¥ API éŒ¯èª¤</div>`; }
        } catch (e) { console.error("Fetch Error:", e); resultDetailsDiv.innerHTML = `<p style="color: red;">é€£ç·šæˆ–è™•ç†éŒ¯èª¤: ${e.message}</p>`; resultSummaryDiv.innerHTML = `<div class="summary-card fail">âŒ é€£ç·šéŒ¯èª¤</div>`; resultSection.style.display = 'block'; }
        finally { submitButton.disabled = false; submitButton.textContent = 'ğŸ” é€å‡ºå¯©æŸ¥'; }
    }

    // --- Display Function ---
    function displayResults(inputs, results) {
         console.log("Displaying results. Inputs:", inputs, "Results:", results);
         const detailsDiv = document.getElementById('result-details'); const summaryDiv = document.getElementById('result-summary');
         if (!detailsDiv || !summaryDiv) { console.error("Result divs not found!"); return; }
         let html = '<ol>'; if (!results || !results.passes || !results.breakdown) { console.error("Invalid results structure received from backend:", results); detailsDiv.innerHTML = '<p style="color: red;">æ”¶åˆ°ç„¡æ•ˆçš„å›æ‡‰è³‡æ–™ï¼Œç„¡æ³•é¡¯ç¤ºçµæœã€‚</p>'; return; }
         let allPass = true; for (const key in results.passes) { if (results.passes[key] === false) { allPass = false; break; } }
         if (allPass) { summaryDiv.innerHTML = `<div class="summary-card pass">âœ… ç©åˆ†åˆæ ¼</div>`; } else { summaryDiv.innerHTML = `<div class="summary-card fail">âŒ ç©åˆ†æœªé”æ¨™</div>`; }
         const rules = { min_total_points: 120, min_professional_course: 84, min_qer_total: 24, max_qer_total: 36, min_mandatory_total: 10, min_fire: 1, min_er: 1, min_inf: 1, min_gen: 1, cultural_change_date: RULE_CHANGE_DATE_MINGUO, cultural_before_min: 2, cultural_before_max: 2, cultural_after_yearly_min: 1, cultural_after_total_min: 12, max_online_points: 40, min_physical_points: 80 }; const profPoints = inputs.professional_course; const profPass = results.passes.professional_min; html += `<li>å°ˆæ¥­èª²ç¨‹ç©åˆ†ï¼š${profPoints.toFixed(1)} ${profPass ? 'âœ…' : 'âŒ'}`; if (!profPass) { html += `<br><span class="error-reason">ã€ç¼ºå°‘ç©åˆ†ã€‘éœ€é”åˆ° ${rules.min_professional_course} åˆ†ï¼Œæ‚¨ç›®å‰ç¼ºå°‘ ${(rules.min_professional_course - profPoints).toFixed(1)} åˆ†ã€‚</span>`; } html += `</li>`; const qerRawTotal = inputs.quality_points_raw + inputs.ethics_points_raw + inputs.regulation_points_raw; const qerCounted = results.breakdown.quality_ethics_regulation.counted; const qerPassMin = results.passes.qer_min; const qerPassEachNonZero = results.passes.qer_each_non_zero; const qerPass = qerPassMin && qerPassEachNonZero; html += `<li>å“è³ª/å€«ç†/æ³•è¦ç©åˆ†ï¼š${qerRawTotal.toFixed(1)}ï¼ˆè¨ˆå…¥ ${qerCounted.toFixed(1)}ï¼Œä¸Šé™ ${rules.max_qer_total}ï¼‰ ${qerPass ? 'âœ…' : 'âŒ'}`; if (!qerPassMin) { html += `<br><span class="error-reason">ã€ç¼ºå°‘ç©åˆ†ã€‘åˆè¨ˆéœ€é”åˆ° ${rules.min_qer_total} åˆ†ï¼Œæ‚¨ç›®å‰ç¼ºå°‘ ${(rules.min_qer_total - qerCounted).toFixed(1)} åˆ†ã€‚</span>`; } if (!qerPassEachNonZero) { let missingCats = []; if (inputs.quality_points_raw <= 0) missingCats.push("å“è³ª"); if (inputs.ethics_points_raw <= 0) missingCats.push("å€«ç†"); if (inputs.regulation_points_raw <= 0) missingCats.push("æ³•è¦"); html += `<br><span class="error-reason">ã€ç¼ºå°‘é¡åˆ¥ã€‘${missingCats.join('ã€')} ä¸å¯ç‚º 0 åˆ†ã€‚</span>`; } html += `</li>`; const mandatoryItems = [ { id: 'fire', name: 'æ¶ˆé˜²å®‰å…¨', key: 'fire_safety', min: rules.min_fire, passKey: 'mandatory_fire' }, { id: 'er', name: 'ç·Šæ€¥æ‡‰è®Š', key: 'emergency_response', min: rules.min_er, passKey: 'mandatory_er' }, { id: 'inf', name: 'æ„ŸæŸ“ç®¡åˆ¶', key: 'infection_control', min: rules.min_inf, passKey: 'mandatory_inf' }, { id: 'gen', name: 'æ€§åˆ¥æ•æ„Ÿåº¦', key: 'gender_sensitivity', min: rules.min_gen, passKey: 'mandatory_gen' } ]; let mandatoryTotalRaw = results.breakdown.mandatory_total_raw; let mandatoryPassEach = results.passes.mandatory_each_min; mandatoryItems.forEach((item) => { const breakdownItem = results.breakdown.mandatory ? results.breakdown.mandatory[item.key] : null; const rawPoints = breakdownItem ? breakdownItem.value : 0; const pass = results.passes[item.passKey]; html += `<li>${item.name}ï¼š${rawPoints.toFixed(1)} ${pass ? 'âœ…' : 'âŒ'}`; if (!pass) { html += `<br><span class="error-reason">ã€ç¼ºå°‘ç©åˆ†ã€‘éœ€é”åˆ° ${item.min} åˆ†ï¼Œæ‚¨ç›®å‰ç¼ºå°‘ ${(item.min - rawPoints).toFixed(1)} åˆ†ã€‚</span>`; } html += `</li>`; }); const mandatoryTotalPass = results.passes.mandatory_total; if (!mandatoryTotalPass) { html += `<li class="error-reason sub-item">å››å¤§å¿…ä¿®åˆè¨ˆï¼š${mandatoryTotalRaw.toFixed(1)} âŒ<br>ã€ç¼ºå°‘ç©åˆ†ã€‘éœ€åˆè¨ˆé”åˆ° ${rules.min_mandatory_total} åˆ†ï¼Œæ‚¨ç›®å‰ç¼ºå°‘ ${(rules.min_mandatory_total - mandatoryTotalRaw).toFixed(1)} åˆ†ã€‚</li>`; } if (!mandatoryPassEach) { html += `<li class="error-reason sub-item">å››å¤§å¿…ä¿®é …ç›® âŒ<br>ã€ç¼ºå°‘é¡åˆ¥ã€‘ä¸Šè¿°æ¨™ç¤º âŒ çš„é …ç›®æœªé”æœ€ä½ 1 åˆ†è¦æ±‚ã€‚</li>`; } const culturalBreakdown = results.breakdown.indigenous_multicultural; const preChangeRaw = culturalBreakdown.pre_change_raw; const yearlyTotalRaw = culturalBreakdown.yearly_total_raw; const totalCulturalCounted = culturalBreakdown.counted; const culturalPass = results.passes.indigenous_multicultural; html += `<li>å¤šå…ƒæ–‡åŒ–ç©åˆ†ï¼šå‰=${preChangeRaw.toFixed(1)} + å¾Œ=${yearlyTotalRaw.toFixed(1)}ï¼ˆç¸½è¨ˆ ${totalCulturalCounted.toFixed(1)}ï¼‰ ${culturalPass ? 'âœ…' : 'âŒ'}`; if (!culturalPass) { const totalRequiredCultural = results.notes.includes("æ–°åˆ¶") ? rules.cultural_after_total_min : rules.cultural_before_min; const culturalDeficit = Math.max(0, totalRequiredCultural - totalCulturalCounted); if (culturalDeficit > 0 || !results.notes.includes("èˆŠåˆ¶")) { html += `<br><span class="error-reason">ã€ç¼ºå°‘ç©åˆ†ã€‘éœ€é”åˆ° ${totalRequiredCultural} åˆ†ï¼Œæ‚¨ç›®å‰ç¼ºå°‘ ${culturalDeficit.toFixed(1)} åˆ†ã€‚</span>`; if (results.notes.includes("æ–°åˆ¶")) { html += `<br><span class="error-reason"> (æ–°åˆ¶éœ€æ¯å¹´å„ 1 åˆ†)</span>`; } } else if (results.notes.includes("æ–°åˆ¶")) { html += `<br><span class="error-reason">ã€æœªé”æ¨™ã€‘æ–°åˆ¶éœ€æ¯å¹´å„ 1 åˆ†ï¼Œè«‹æª¢æŸ¥å„å¹´åº¦ç©åˆ†ã€‚</span>`; } else if (!results.notes.includes("æ–°åˆ¶") && !results.notes.includes("èˆŠåˆ¶")) { html += `<br><span class-"error-reason">ã€éŒ¯èª¤ã€‘${results.notes}</span>`; } } html += `</li>`; const onlinePoints = results.breakdown.online_points_raw; const onlineCounted = results.breakdown.online_points_capped; const onlinePass = results.passes.online_max; html += `<li>ç¶²è·¯ç©åˆ†ï¼š${onlinePoints.toFixed(1)}ï¼ˆè¨ˆå…¥ ${onlineCounted.toFixed(1)}ï¼Œä¸Šé™ ${rules.max_online_points}ï¼‰ ${onlinePass ? 'âœ…' : ''}`; html += `</li>`; const physicalPoints = results.breakdown.physical_points_derived; const physicalPass = results.passes.physical_min; if (!physicalPass) { html += `<li class="error-reason sub-item">å¯¦é«”ç©åˆ†ï¼š${physicalPoints.toFixed(1)} âŒ<br>ã€ç¼ºå°‘ç©åˆ†ã€‘å¯¦é«”ç©åˆ†éœ€é”åˆ° ${rules.min_physical_points} åˆ†ï¼Œæ‚¨ç›®å‰ç¼ºå°‘ ${(rules.min_physical_points - physicalPoints).toFixed(1)} åˆ†ã€‚(ç¸½åˆ† - ç¶²è·¯ç©åˆ†)</li>`; } const totalCounted = results.total_counted; const totalPass = results.passes.total; html += `<li>ğŸ“Š **åŠ ç¸½å¾Œç¸½ç©åˆ†**ï¼ˆè¨ˆå…¥ä¸Šé™å¾Œï¼‰ï¼š${totalCounted.toFixed(1)} ${totalPass ? 'âœ…' : 'âŒ'}`; if (!totalPass) { html += `<br><span class="error-reason">ã€ç¼ºå°‘ç©åˆ†ã€‘ç¸½ç©åˆ†éœ€é”åˆ° ${rules.min_total_points} åˆ†ï¼Œæ‚¨ç›®å‰ç¼ºå°‘ ${(rules.min_total_points - totalCounted).toFixed(1)} åˆ†ã€‚</span>`; } html += `</li>`; html += '</ol>'; detailsDiv.innerHTML = html; console.log("Results displayed."); }
    
    // Q&A æœå°‹åŠŸèƒ½
    function filterQA() { let filter = document.getElementById('qa-search').value.toUpperCase(); let details = document.querySelectorAll('#qa-section details'); let noResults = document.getElementById('qa-no-results'); let categories = document.querySelectorAll('.qa-category'); let found = false; details.forEach(detail => { let summary = detail.querySelector('summary'); let answer = detail.querySelector('.answer'); let text = (summary.textContent || summary.innerText) + (answer.textContent || answer.innerText); if (text.toUpperCase().indexOf(filter) > -1) { detail.style.display = ""; found = true; } else { detail.style.display = "none"; } }); noResults.style.display = found ? "none" : "block"; categories.forEach(cat => { cat.style.display = (filter.length > 0) ? "none" : "block"; }); }
     // --- Initial Setup ---
     document.addEventListener('DOMContentLoaded', () => { const navLinks = document.querySelectorAll('.sub-nav a'); navLinks.forEach(link => { link.addEventListener('click', (e) => { navLinks.forEach(nav => nav.classList.remove('active')); link.classList.add('active'); }); }); const searchBox = document.getElementById('qa-search'); if (searchBox) { searchBox.addEventListener('keyup', filterQA); } console.log("DOM Loaded, event listeners attached."); });
  </script>
</body>
</html>
